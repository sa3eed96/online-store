(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{125:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(20);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},140:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(30);var r=a(34);function c(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},170:function(e,t,a){var n=a(8),r=a(171);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};n(r,c);e.exports=r.locals||{}},171:function(e,t,a){(t=a(9)(!1)).push([e.i,"body{background:#fff;font-size:18px;min-height:100vh}.appBody{position:relative;padding-bottom:6rem}.lineBreak{height:1px;background:#5dabaa;opacity:.5}.button{background-color:#fff;color:#000;border:1px solid #000;border-radius:5px}#myreview{border:1px solid gray}#myrate{font-size:15px}",""]),e.exports=t},172:function(e,t,a){var n=a(8),r=a(173);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};n(r,c);e.exports=r.locals||{}},173:function(e,t,a){(t=a(9)(!1)).push([e.i,"body{background:#fff;font-size:18px;min-height:100vh}.appBody{position:relative;padding-bottom:6rem}.lineBreak{height:1px;background:#5dabaa;opacity:.5}.button{background-color:#fff;color:#000;border:1px solid #000;border-radius:5px}#rateOverview{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:2rem}#rateOverview p{border-radius:50%;border:1px solid gray;padding:15px;font-weight:700;font-size:20px}#reviewsSection{margin-top:2rem}#reviewsTitle{background-color:#b0c4de;padding:10px}#rateSubmitSection{border-left:1px solid gray}@media(max-width: 768px){#rateSubmitSection{border-left:0}}",""]),e.exports=t},184:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),l=a(13),o=a(3),i=a.n(o),u=a(125),s=a(5),d=a(4),m=a.n(d),b=a(20),p=a(140),f=a(1),h=(a(170),function(e){var t=Object(r.useState)(e.myRate),a=Object(n.a)(t,2),l=a[0],o=a[1],d=Object(r.useState)(null),h=Object(n.a)(d,2),v=h[0],E=h[1],O=Object(r.useState)([c.a.createElement(f.h,null),c.a.createElement(f.h,null),c.a.createElement(f.h,null),c.a.createElement(f.h,null),c.a.createElement(f.h,null)]),g=Object(n.a)(O,2),k=g[0],y=g[1];Object(r.useEffect)((function(){for(var e=Object(p.a)(k),t=0;t<5;t++)t<l.checkedRate+1?e[t]=c.a.createElement(f.m,null):e[t]=c.a.createElement(f.h,null);y(e)}),[]);var j=function(){var t=Object(s.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a.preventDefault(),n=null,!("id"in l)){t.next=9;break}return t.next=6,m.a.put("/api/product/".concat(e.productId,"/userrate/").concat(l.id),{rateArray:e.rate,rate:l.checkedRate,comment:l.comment});case 6:n=t.sent,t.next=12;break;case 9:return t.next=11,m.a.post("/api/product/".concat(e.productId,"/userrate"),{rateArray:e.rate,rate:l.checkedRate,comment:l.comment});case 11:n=t.sent;case 12:r=n.data,e.updateRate(Object(u.a)({},r.userRate,{checkedRate:r.userRate.rate})),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),E(t.t0.response.data);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}(),w=function(e,t){t.preventDefault(),o(Object(u.a)({},l,{checkedRate:e-1}));for(var a=Object(p.a)(k),n=0;n<5;n++)a[n]=n<e?c.a.createElement(f.m,null):c.a.createElement(f.h,null);y(a)},x=function(e){o(Object(u.a)({},l,Object(b.a)({},e.target.name,e.target.value)))};return c.a.createElement("div",{className:"mt-4"},c.a.createElement("h6",null,"Rate Product:"),c.a.createElement("form",{onSubmit:j},c.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return w(1,e)},htmlFor:"r1"},k[0]),c.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"0",label:"1",id:"r1",checked:"0"===l.checkedRate,onChange:x}),c.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return w(2,e)},htmlFor:"r2"},k[1]),c.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"1",label:"2",id:"r2",checked:"1"===l.checkedRate,onChange:x}),c.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return w(3,e)},htmlFor:"r3"},k[2]),c.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"2",label:"3",id:"r3",checked:"2"===l.checkedRate,onChange:x}),c.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return w(4,e)},htmlFor:"r4"},k[3]),c.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"3",label:"4",id:"r4",checked:"3"===l.checkedRate,onChange:x}),c.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return w(5,e)},htmlFor:"r5"},k[4]),c.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"4",label:"5",id:"r5",checked:"4"===l.checkedRate,onChange:x}),c.a.createElement("textarea",{id:"myreview",className:"form-control",name:"comment",placeholder:"optional rate review",value:l.comment,onChange:x}),c.a.createElement("button",{className:"btn btn-outline-dark mt-1"},"rate"),"id"in l&&c.a.createElement("button",{onClick:e.edit,className:"btn btn-outline-dark ml-1 mt-1"},"cancel")),v&&c.a.createElement("p",{className:"text-danger"},c.a.createElement("small",null,v)))}),v=a(29),E=function(e){var t=Object(r.useState)(null),a=Object(n.a)(t,2),l=a[0],o=a[1];return Object(r.useEffect)((function(){var t=[0,0,0,0,0];t[e.myRate.checkedRate]+=1,o(c.a.createElement(v.a,{rate:t}))}),[e.myRate.checkedRate]),c.a.createElement("div",{className:"mt-4"},c.a.createElement("div",null,c.a.createElement("h6",null,"Your Rate:"),c.a.createElement("b",null,l),c.a.createElement("p",{id:"myrate"},'"',e.myRate.comment,'"')),c.a.createElement("button",{className:"btn btn-outline-dark",onClick:e.edit},"Edit"),c.a.createElement("hr",null))},O=a(10),g=a(11),k=function(e){var t=Object(r.useState)({comment:"",checkedRate:"4"}),a=Object(n.a)(t,2),l=a[0],o=a[1],d=Object(r.useState)("edit"),b=Object(n.a)(d,2),p=b[0],f=b[1],v=Object(r.useState)(!0),k=Object(n.a)(v,2),y=k[0],j=k[1];Object(r.useEffect)((function(){(function(){var t=Object(s.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/api/product/".concat(e.productId,"/userrate/myrate"));case 2:a=t.sent,n=a.data,console.log(n),n.myRate&&(o(Object(u.a)({},n.myRate,{checkedRate:n.myRate.rate})),f("view")),j(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var w=function(){f("view"===p?"edit":"view")};return c.a.createElement(O.a,{loading:y},"edit"===p&&c.a.createElement(h,{myRate:l,edit:w,updateRate:function(e){g.a.dispatch("showNotification",{body:"Rate Submitted",background:"bg-success",header:"Success"}),o(e),f("view")},productId:e.productId,rate:e.rate}),"view"===p&&c.a.createElement(E,{myRate:l,edit:w}))},y=a(35),j=a(153),w=function(e){var t=Object(r.useContext)(l.a),a=Object(r.useState)([]),o=Object(n.a)(a,2),u=o[0],d=o[1],b=Object(r.useState)(1),p=Object(n.a)(b,2),f=p[0],h=p[1],E=Object(r.useState)(0),O=Object(n.a)(E,2),g=O[0],k=O[1],w=Object(r.useState)(""),x=Object(n.a)(w,2),R=x[0],S=x[1];Object(r.useEffect)((function(){(function(){var t=Object(s.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,S(""),t.next=4,m.a.get("/api/product/".concat(e.productId,"/userrate?page=").concat(f));case 4:a=t.sent,n=a.data,d(n.rates),k(n.count),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),S("error fetching reviews");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}})()()}),[f]);return c.a.createElement("div",null,R&&c.a.createElement("p",{className:"text-danger"},c.a.createElement("small",null,R)),c.a.createElement("h6",{id:"reviewsTitle"},u.length," total reviews"),u.map((function(e){return c.a.createElement("div",{className:"reviewItem p-2 mb-2",key:e.id},(!t.state.user||e.PurchaseDetails[0].Purchase.User.id!==t.state.user.id)&&c.a.createElement("div",null,c.a.createElement("b",null,(n=e.rate,(r=[0,0,0,0,0])[n]+=1,c.a.createElement(v.a,{rate:r}))),c.a.createElement("br",null),c.a.createElement("i",null,"by ",c.a.createElement("b",null,e.PurchaseDetails[0].Purchase.User.fullName)),"  ",c.a.createElement("small",null,"on ",(a=e.createdAt,Object(j.a)(a).format("YYYY-MM-DD"))),c.a.createElement("br",null),e.comment.length>0&&c.a.createElement("p",null,'"',e.comment,'"'),c.a.createElement("div",{class:"lineBreak"})));var a,n,r})),c.a.createElement("br",null),g>0&&c.a.createElement(y.a,{page:f,count:g,updatePage:function(e){h(e)},perPage:5}))};a(172),t.default=function(e){var t=Object(r.useContext)(l.a),a=Object(r.useState)(e.rate),o=Object(n.a)(a,2),i=o[0],u=o[1];return c.a.createElement("div",null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-5",id:"rateOverview"},c.a.createElement("p",null,function(e){var t=e.reduce((function(e,t){return e+t})),a=e.reduce((function(e,t,a){return e+(a+1)*t}));return 0===t?0:a/t}(i)),c.a.createElement(v.a,{size:48,rate:i})),t.state.isAuthenticated&&c.a.createElement("div",{className:"col-md-6",id:"rateSubmitSection"},c.a.createElement(k,{productId:e.productId,updateRate:function(e){u(e)},rate:i}))),c.a.createElement("div",{className:"row",id:"reviewsSection"},c.a.createElement("div",{className:"col-12"},c.a.createElement(w,{productId:e.productId}))))}}}]);
//# sourceMappingURL=2.bundle.js.map