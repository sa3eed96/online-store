(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{109:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(28);var r=a(34);function c(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},148:function(e,t,a){"use strict";a.r(t);var n=a(20),r=a(3),c=a.n(r),l=a(109),u=a(21),o=a(5),i=a(2),s=a(0),m=a.n(s),d=a(35),p=a(4),b=a.n(p),h=a(1),f=a(26);t.default=function(e){var t=Object(s.useState)(e.rate),a=Object(i.a)(t,2),r=a[0],p=a[1],k=Object(s.useState)([]),E=Object(i.a)(k,2),v=E[0],j=E[1],O=Object(s.useState)({comment:"",checkedRate:"4"}),y=Object(i.a)(O,2),g=y[0],w=y[1],R=Object(s.useState)(1),x=Object(i.a)(R,2),N=x[0],S=x[1],C=Object(s.useState)(0),P=Object(i.a)(C,2),A=P[0],I=P[1],F=Object(s.useState)([m.a.createElement(h.a,null),m.a.createElement(h.a,null),m.a.createElement(h.a,null),m.a.createElement(h.a,null),m.a.createElement(h.a,null)]),D=Object(i.a)(F,2),J=D[0],U=D[1],T=Object(s.useState)(null),q=Object(i.a)(T,2),z=q[0],B=q[1];Object(s.useEffect)((function(){(function(){var t=Object(o.a)(c.a.mark((function t(){var a,n,r,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.user.state.isAuthenticated){t.next=6;break}return t.next=3,b.a.get("/api/product/".concat(e.productId,"/userrate/myrate"));case 3:if(a=t.sent,(n=a.data).hasOwnProperty("myRate")){for(w(Object(u.a)({},n.myRate,{checkedRate:n.myRate.rate.toString()})),r=Object(l.a)(J),o=0;o<5;o++)o<=n.myRate.rate?r[o]=m.a.createElement(h.c,null):r[o]=m.a.createElement(h.a,null);U(r)}case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(s.useEffect)((function(){(function(){var t=Object(o.a)(c.a.mark((function t(){var a,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,B(""),t.next=4,b.a.get("/api/product/".concat(e.productId,"/userrate?page=").concat(N));case 4:a=t.sent,n=a.data,j(n.rates),I(n.count),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),B("could not fetch rate");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}})()()}),[N]);var G=function(){var t=Object(o.a)(c.a.mark((function t(a){var n,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a.preventDefault(),n=null,!("id"in g)){t.next=9;break}return t.next=6,b.a.put("/api/product/".concat(e.productId,"/userrate/").concat(g.id),{rateArray:r,rate:g.checkedRate,comment:g.comment});case 6:n=t.sent,t.next=12;break;case 9:return t.next=11,b.a.post("/api/product/".concat(e.productId,"/userrate"),{rateArray:r,rate:g.checkedRate,comment:g.comment});case 11:n=t.sent;case 12:l=n.data,B(null),p(l.rate),w(Object(u.a)({},l.userRate,{checkedRate:l.userRate.rate})),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),B(t.t0.response.data);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}(),H=function(e){w(Object(u.a)({},g,Object(n.a)({},e.target.name,e.target.value)))},K=function(e,t){t.preventDefault(),w(Object(u.a)({},g,{checkedRate:e-1}));for(var a=Object(l.a)(J),n=0;n<5;n++)a[n]=n<e?m.a.createElement(h.c,null):m.a.createElement(h.a,null);U(a)};return m.a.createElement("div",null,e.user.state.isAuthenticated&&m.a.createElement("div",null,m.a.createElement("h3",null,"Rate Product:"),m.a.createElement("form",{onSubmit:G},m.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return K(1,e)},htmlFor:"r1"},J[0]),m.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"0",label:"1",id:"r1",checked:"0"===g.checkedRate,onChange:H}),m.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return K(2,e)},htmlFor:"r2"},J[1]),m.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"1",label:"2",id:"r2",checked:"1"===g.checkedRate,onChange:H}),m.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return K(3,e)},htmlFor:"r3"},J[2]),m.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"2",label:"3",id:"r3",checked:"2"===g.checkedRate,onChange:H}),m.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return K(4,e)},htmlFor:"r4"},J[3]),m.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"3",label:"4",id:"r4",checked:"3"===g.checkedRate,onChange:H}),m.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return K(5,e)},htmlFor:"r5"},J[4]),m.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"4",label:"5",id:"r5",checked:"4"===g.checkedRate,onChange:H}),m.a.createElement("textarea",{className:"form-control w-50",name:"comment",placeholder:"optional rate review",value:g.comment,onChange:H}),m.a.createElement("button",{className:"btn btn-outline-success mt-1"},g.id?"update rate":"rate"))),z&&m.a.createElement("p",{className:"text-danger"},m.a.createElement("small",null,z)),0==v.length&&m.a.createElement("h6",null,"0 reviews"),v.length>0&&m.a.createElement("h6",null,v.length," reviews"),v.map((function(t){return m.a.createElement("div",{key:t.id},console.log(t),t.comment&&(!e.user.state.user||t.PurchaseDetails[0].Purchase.User.id!==e.user.state.user.id)&&m.a.createElement("div",null,m.a.createElement("i",null,t.PurchaseDetails[0].Purchase.User.fullName)," | ",m.a.createElement("b",null,function(e){var t=[0,0,0,0,0];return t[e]+=1,m.a.createElement(f.a,{rate:t})}(t.rate)),m.a.createElement("br",null),m.a.createElement("p",null,t.comment),m.a.createElement("hr",null)))})),m.a.createElement("br",null),A>0&&m.a.createElement(d.a,{page:N,count:A,updatePage:function(e){S(e)},perPage:5}))}}}]);
//# sourceMappingURL=5.bundle.js.map