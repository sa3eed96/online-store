(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{108:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(27);var r=a(33);function c(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},147:function(e,t,a){"use strict";a.r(t);var n=a(20),r=a(3),c=a.n(r),l=a(108),u=a(21),o=a(4),i=a(2),s=a(0),m=a.n(s),d=a(34),b=a(5),p=a.n(b),h=a(1);t.default=function(e){var t=Object(s.useState)(e.rate.rate),a=Object(i.a)(t,2),r=a[0],b=a[1],f=Object(s.useState)([]),E=Object(i.a)(f,2),k=E[0],v=E[1],j=Object(s.useState)({comment:"",checkedRate:"4"}),O=Object(i.a)(j,2),g=O[0],y=O[1],w=Object(s.useState)(1),R=Object(i.a)(w,2),x=R[0],N=R[1],S=Object(s.useState)(0),C=Object(i.a)(S,2),P=C[0],A=C[1],F=Object(s.useState)([m.a.createElement(h.a,null),m.a.createElement(h.a,null),m.a.createElement(h.a,null),m.a.createElement(h.a,null),m.a.createElement(h.a,null)]),I=Object(i.a)(F,2),D=I[0],J=I[1],U=Object(s.useState)(null),T=Object(i.a)(U,2),q=T[0],z=T[1];Object(s.useEffect)((function(){(function(){var t=Object(o.a)(c.a.mark((function t(){var a,n,r,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.user.state.isAuthenticated){t.next=6;break}return t.next=3,p.a.get("/api/product/".concat(e.productId,"/userrate/myrate"));case 3:if(a=t.sent,(n=a.data).hasOwnProperty("myRate")){for(y(Object(u.a)({},n.myRate,{checkedRate:n.myRate.rate.toString()})),r=Object(l.a)(D),o=0;o<5;o++)o<=n.myRate.rate?r[o]=m.a.createElement(h.c,null):r[o]=m.a.createElement(h.a,null);J(r)}case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(s.useEffect)((function(){(function(){var t=Object(o.a)(c.a.mark((function t(){var a,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,z(""),t.next=4,p.a.get("/api/product/".concat(e.productId,"/userrate?page=").concat(x));case 4:a=t.sent,n=a.data,v(n.rates),A(n.count),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),z("could not fetch rate");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}})()()}),[x]);var B=function(){var t=Object(o.a)(c.a.mark((function t(a){var n,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.preventDefault(),t.next=4,p.a.put("/api/product/".concat(e.productId,"/rate/").concat(e.rate.id),{rateArray:r,rate:g.checkedRate,comment:g.comment});case 4:n=t.sent,l=n.data,z(null),b(l.rate.rate),y(Object(u.a)({},l.userRate,{checkedRate:l.userRate.rate})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),z(t.t0.response.data);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),G=function(e){y(Object(u.a)({},g,Object(n.a)({},e.target.name,e.target.value)))},H=function(e,t){t.preventDefault(),y(Object(u.a)({},g,{checkedRate:e-1}));for(var a=Object(l.a)(D),n=0;n<5;n++)a[n]=n<e?m.a.createElement(h.c,null):m.a.createElement(h.a,null);J(a)};return m.a.createElement("div",null,e.user.state.isAuthenticated&&m.a.createElement("div",null,m.a.createElement("h3",null,"Rate Product:"),m.a.createElement("form",{onSubmit:B},m.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return H(1,e)},htmlFor:"r1"},D[0]),m.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"0",label:"1",id:"r1",checked:"0"===g.checkedRate,onChange:G}),m.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return H(2,e)},htmlFor:"r2"},D[1]),m.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"1",label:"2",id:"r2",checked:"1"===g.checkedRate,onChange:G}),m.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return H(3,e)},htmlFor:"r3"},D[2]),m.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"2",label:"3",id:"r3",checked:"2"===g.checkedRate,onChange:G}),m.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return H(4,e)},htmlFor:"r4"},D[3]),m.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"3",label:"4",id:"r4",checked:"3"===g.checkedRate,onChange:G}),m.a.createElement("label",{className:"text-warning clickable",onClick:function(e){return H(5,e)},htmlFor:"r5"},D[4]),m.a.createElement("input",{className:"d-none",type:"radio",name:"checkedRate",value:"4",label:"5",id:"r5",checked:"4"===g.checkedRate,onChange:G}),m.a.createElement("textarea",{className:"form-control w-50",name:"comment",placeholder:"optional rate review",value:g.comment,onChange:G}),m.a.createElement("button",{className:"btn btn-outline-success mt-1"},g.id?"update rate":"rate"))),q&&m.a.createElement("p",{className:"text-danger"},m.a.createElement("small",null,q)),0==k.length&&m.a.createElement("h6",null,"0 reviews"),k.length>0&&m.a.createElement("h6",null,k.length," reviews"),k.map((function(t){return m.a.createElement("div",{key:t.id},console.log(t),t.comment&&(!e.user.state.user||t.PurchaseDetails[0].Purchase.User.id!==e.user.state.user.id)&&m.a.createElement("div",null,m.a.createElement("i",null,t.PurchaseDetails[0].Purchase.User.fullName)," | ",m.a.createElement("b",null,t.rate+1," stars"),m.a.createElement("br",null),m.a.createElement("p",null,t.comment),m.a.createElement("hr",null)))})),m.a.createElement("br",null),P>0&&m.a.createElement(d.a,{page:x,count:P,updatePage:function(e){N(e)},perPage:5}))}}}]);
//# sourceMappingURL=5.bundle.js.map